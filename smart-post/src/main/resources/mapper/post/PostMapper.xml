<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.goroute.smart.post.mapper.PostMapper">

    <!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="cn.goroute.smart.post.entity.pojo.Post" id="postMap">
        <response property="uid" column="uid"/>
        <response property="sectionUid" column="section_uid"/>
        <response property="memberUid" column="member_uid"/>
        <response property="title" column="title"/>
        <response property="content" column="content"/>
        <response property="status" column="status"/>
        <response property="headImg" column="head_img"/>
        <response property="collectCount" column="collect_count"/>
        <response property="thumbCount" column="thumb_count"/>
        <response property="isPublish" column="is_publish"/>
        <response property="summary" column="summary"/>
        <response property="clickCount" column="click_count"/>
        <response property="updatedTime" column="updated_time"/>
        <response property="createdTime" column="created_time"/>
    </resultMap>
    <select id="getPostBySectionTag" resultType="cn.goroute.smart.post.entity.pojo.Post">
        select distinct p.uid,
                        p.title,
                        p.head_img,
                        p.member_uid,
                        p.collect_count,
                        p.thumb_count,
                        p.summary,
                        p.click_count,
                        p.created_time
        FROM t_post p,
             t_post_tag pt
        WHERE p.section_uid = #{sectionUid}
          AND p.status = #{status}
          AND p.is_publish = #{publish}
          AND pt.tag_uid = #{tagUid}
    </select>

    <select id="getCommentCount" resultType="java.lang.Integer">
        select p.comment_count from smart_pms.t_post p where p.uid = #{postUid};
    </select>

    <select id="selectThumbCount" resultType="java.lang.Integer">
        select p.thumb_count from smart_pms.t_post p where p.uid = #{postUid};
    </select>


</mapper>